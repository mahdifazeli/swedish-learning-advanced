<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø³ÙˆØ¦Ø¯ÛŒ - Ø³Ø·Ø­ Ù…ØªÙˆØ³Ø·</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Vazirmatn', sans-serif;
        }
        
        .ltr-text {
            direction: ltr;
            text-align: left;
        }
        
        /* RTL adjustments for Tailwind */
        [dir="rtl"] .text-left {
            text-align: right;
        }
        
        [dir="rtl"] .text-right {
            text-align: left;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const DAILY_GOAL = 20; // 20 items per day for 30 min session

        // Content Database
        const contentDatabase = [
            // === LEVEL 3: INTERMEDIATE - Grammar & Complex Sentences ===
            {
                id: 1,
                type: "complex_sentence",
                level: 3,
                category: "Grammar",
                topic: "Ø³Ø§Ø®ØªØ§Ø± Ø¬Ù…Ù„Ù‡",
                swedish: "Jag undrar om du har sett filmen som alla pratar om.",
                farsi: "Ù…Ù† Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù… Ø¢ÛŒØ§ ØªÙˆ Ø¢Ù† ÙÛŒÙ„Ù…ÛŒ Ø±Ø§ Ú©Ù‡ Ù‡Ù…Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡â€ŒØ§Ø´ ØµØ­Ø¨Øª Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ø¯ÛŒØ¯Ù‡â€ŒØ§ÛŒ.",
                grammar_note: "Ø¬Ù…Ù„Ø§Øª ÙØ±Ø¹ÛŒ Ø¨Ø§ 'om' Ùˆ 'som': ØªØ±ØªÛŒØ¨ Ú©Ù„Ù…Ø§Øª Ø¯Ø± Ø¬Ù…Ù„Ù‡ ÙØ±Ø¹ÛŒ ØªØºÛŒÛŒØ± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (ÙØ¹Ù„ Ø¨Ø¹Ø¯ Ø§Ø² ÙØ§Ø¹Ù„)",
                difficulty: "Ù…ØªÙˆØ³Ø·"
            },
            {
                id: 2,
                type: "complex_sentence",
                level: 3,
                category: "Grammar",
                topic: "Ø³Ø§Ø®ØªØ§Ø± Ø¬Ù…Ù„Ù‡",
                swedish: "NÃ¤r jag var ung brukade jag simma varje dag.",
                farsi: "ÙˆÙ‚ØªÛŒ Ø¬ÙˆØ§Ù† Ø¨ÙˆØ¯Ù…ØŒ Ù‡Ø± Ø±ÙˆØ² Ø´Ù†Ø§ Ù…ÛŒâ€ŒÚ©Ø±Ø¯Ù….",
                grammar_note: "Ø²Ù…Ø§Ù† Ú¯Ø°Ø´ØªÙ‡ Ø¹Ø§Ø¯ØªÛŒ Ø¨Ø§ 'brukade' + ÙØ¹Ù„ Ù…ØµØ¯Ø±ÛŒ. 'NÃ¤r' Ø¯Ø± Ø§Ø¨ØªØ¯Ø§ÛŒ Ø¬Ù…Ù„Ù‡ Ø¨Ø§Ø¹Ø« ÙˆØ§Ø±ÙˆÙ†Ú¯ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯",
                difficulty: "Ù…ØªÙˆØ³Ø·"
            },
            {
                id: 3,
                type: "complex_sentence",
                level: 3,
                category: "Grammar",
                topic: "Ø§ÙØ¹Ø§Ù„ Ø±ÙÙ„Ú©Ø³ÛŒÙˆ",
                swedish: "Jag mÃ¥ste skynda mig fÃ¶r att hinna med bussen.",
                farsi: "Ø¨Ø§ÛŒØ¯ Ø¹Ø¬Ù„Ù‡ Ú©Ù†Ù… ØªØ§ Ø¨Ù‡ Ø§ØªÙˆØ¨ÙˆØ³ Ø¨Ø±Ø³Ù….",
                grammar_note: "Ø§ÙØ¹Ø§Ù„ Ø±ÙÙ„Ú©Ø³ÛŒÙˆ: 'skynda sig' (Ø¹Ø¬Ù„Ù‡ Ú©Ø±Ø¯Ù†). Ø¶Ù…ÛŒØ± Ø±ÙÙ„Ú©Ø³ÛŒÙˆ Ø¨Ø¹Ø¯ Ø§Ø² ÙØ¹Ù„ Ù…ÛŒâ€ŒØ¢ÛŒØ¯",
                difficulty: "Ù…ØªÙˆØ³Ø·"
            },
            {
                id: 4,
                type: "vocabulary",
                level: 3,
                category: "Work",
                topic: "Ù…Ø­ÛŒØ· Ú©Ø§Ø±",
                swedish: "mÃ¶te",
                farsi: "Ø¬Ù„Ø³Ù‡",
                example: "Vi har ett viktigt mÃ¶te klockan tre.",
                example_farsi: "Ù…Ø§ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ù…Ù‡Ù… Ø³Ø§Ø¹Øª Ø³Ù‡ Ø¯Ø§Ø±ÛŒÙ….",
                related_words: ["presentation - Ø§Ø±Ø§Ø¦Ù‡", "fÃ¶rhandling - Ù…Ø°Ø§Ú©Ø±Ù‡", "deadline - Ø¶Ø±Ø¨â€ŒØ§Ù„Ø§Ø¬Ù„"]
            },
            {
                id: 5,
                type: "vocabulary",
                level: 3,
                category: "Work",
                topic: "Ù…Ø­ÛŒØ· Ú©Ø§Ø±",
                swedish: "anstÃ¤lld",
                farsi: "Ú©Ø§Ø±Ù…Ù†Ø¯",
                example: "FÃ¶retaget har Ã¶ver hundra anstÃ¤llda.",
                example_farsi: "Ø´Ø±Ú©Øª Ø¨ÛŒØ´ Ø§Ø² ØµØ¯ Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¯Ø§Ø±Ø¯.",
                related_words: ["chef - Ù…Ø¯ÛŒØ±", "kollega - Ù‡Ù…Ú©Ø§Ø±", "arbetsgivare - Ú©Ø§Ø±ÙØ±Ù…Ø§"]
            },
            {
                id: 6,
                type: "conversation",
                level: 3,
                category: "Social",
                topic: "Ú¯ÙØªÚ¯ÙˆÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ",
                title: "PÃ¥ ett kafÃ©",
                title_farsi: "Ø¯Ø± ÛŒÚ© Ú©Ø§ÙÙ‡",
                lines: [
                    { swedish: "- Hej! LÃ¤nge sedan vi sÃ¥gs.", farsi: "- Ø³Ù„Ø§Ù…! Ø®ÛŒÙ„ÛŒ ÙˆÙ‚Øª Ø§Ø³Øª Ù†Ø¯ÛŒØ¯Ù‡â€ŒØ§ÛŒÙ…Øª." },
                    { swedish: "- Ja, det var pÃ¥ Annas fest, eller hur?", farsi: "- Ø¨Ù„Ù‡ØŒ Ø¯Ø± Ù…Ù‡Ù…Ø§Ù†ÛŒ Ø¢Ù†Ø§ Ø¨ÙˆØ¯ØŒ Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ" },
                    { swedish: "- Precis! Hur har du haft det?", farsi: "- Ø¯Ù‚ÛŒÙ‚Ø§! Ú†Ø·ÙˆØ± Ø¨ÙˆØ¯Ù‡â€ŒØ§ÛŒØŸ" },
                    { swedish: "- JÃ¤ttebra! Jag har bytt jobb faktiskt.", farsi: "- Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨! Ø±Ø§Ø³ØªØ´ Ù…Ù† Ø´ØºÙ„Ù… Ø±Ø§ Ø¹ÙˆØ¶ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù…." },
                    { swedish: "- Ã…h, grattis! Vad gÃ¶r du nu dÃ¥?", farsi: "- Ø§ÙˆÙ‡ØŒ ØªØ¨Ø±ÛŒÚ©! Ø­Ø§Ù„Ø§ Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŸ" }
                ]
            },
            {
                id: 7,
                type: "grammar_drill",
                level: 3,
                category: "Grammar",
                topic: "Ø­Ø±ÙˆÙ Ø§Ø¶Ø§ÙÙ‡",
                question: "Jag bor ___ Stockholm ___ fem Ã¥r.",
                farsi_question: "Ù…Ù† ___ Ø§Ø³ØªÚ©Ù‡Ù„Ù… ___ Ù¾Ù†Ø¬ Ø³Ø§Ù„ Ø²Ù†Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù….",
                options: [
                    { text: "i / sedan", correct: true },
                    { text: "pÃ¥ / sedan", correct: false },
                    { text: "i / fÃ¶r", correct: false },
                    { text: "pÃ¥ / fÃ¶r", correct: false }
                ],
                explanation: "'i' Ø¨Ø±Ø§ÛŒ Ø´Ù‡Ø±Ù‡Ø§ Ùˆ 'sedan' Ø¨Ø±Ø§ÛŒ Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø§Ø² Ú¯Ø°Ø´ØªÙ‡ ØªØ§ Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯"
            },
            {
                id: 8,
                type: "idiom",
                level: 3,
                category: "Expressions",
                topic: "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ø±Ø§ÛŒØ¬",
                swedish: "Det Ã¤r ingen ko pÃ¥ isen.",
                farsi: "Ú¯Ø§ÙˆÛŒ Ø±ÙˆÛŒ ÛŒØ® Ù†ÛŒØ³Øª.",
                meaning: "Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ / Ù…Ø´Ú©Ù„ÛŒ Ù†ÛŒØ³Øª",
                example: "- Jag Ã¤r orolig fÃ¶r provet! - Det Ã¤r ingen ko pÃ¥ isen, du kommer klara det.",
                example_farsi: "- Ù…Ù† Ù†Ú¯Ø±Ø§Ù† Ø§Ù…ØªØ­Ø§Ù† Ù‡Ø³ØªÙ…! - Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ØŒ Ù…ÙˆÙÙ‚ Ø®ÙˆØ§Ù‡ÛŒ Ø´Ø¯."
            },

            // === LEVEL 4: UPPER INTERMEDIATE ===
            {
                id: 9,
                type: "complex_sentence",
                level: 4,
                category: "Grammar",
                topic: "Ø¬Ù…Ù„Ø§Øª Ø´Ø±Ø·ÛŒ",
                swedish: "Om jag hade vetat det skulle jag ha kommit tidigare.",
                farsi: "Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø³ØªÙ…ØŒ Ø²ÙˆØ¯ØªØ± Ù…ÛŒâ€ŒØ¢Ù…Ø¯Ù….",
                grammar_note: "Ø´Ø±Ø· Ú¯Ø°Ø´ØªÙ‡ Ù†Ø§Ø±Ø¦Ø§Ù„: 'hade' + supinum Ø¨Ø±Ø§ÛŒ Ú¯Ø°Ø´ØªÙ‡ØŒ 'skulle ha' + supinum Ø¨Ø±Ø§ÛŒ Ù†ØªÛŒØ¬Ù‡",
                difficulty: "Ù¾ÛŒØ´Ø±ÙØªÙ‡"
            },
            {
                id: 10,
                type: "complex_sentence",
                level: 4,
                category: "Grammar",
                topic: "ØµÙØ§Øª Ùˆ Ù‚ÛŒØ¯Ù‡Ø§",
                swedish: "Det Ã¤r viktigt att man tar det lugnt och inte stressar.",
                farsi: "Ù…Ù‡Ù… Ø§Ø³Øª Ú©Ù‡ Ø¢Ø¯Ù… Ø¢Ø±Ø§Ù… Ø¨Ø§Ø´Ø¯ Ùˆ Ø§Ø³ØªØ±Ø³ Ù†Ú¯ÛŒØ±Ø¯.",
                grammar_note: "Ø³Ø§Ø®ØªØ§Ø± 'det Ã¤r + ØµÙØª + att': ÙØ§Ø¹Ù„ Ø¹Ù…ÙˆÙ…ÛŒ 'man' Ø¨Ø±Ø§ÛŒ Ø§Ø´Ø§Ø±Ù‡ Ø¨Ù‡ Ø§ÙØ±Ø§Ø¯ Ø¨Ù‡ Ø·ÙˆØ± Ú©Ù„ÛŒ",
                difficulty: "Ù¾ÛŒØ´Ø±ÙØªÙ‡"
            },
            {
                id: 11,
                type: "vocabulary",
                level: 4,
                category: "Abstract",
                topic: "Ù…ÙØ§Ù‡ÛŒÙ… Ø§Ù†ØªØ²Ø§Ø¹ÛŒ",
                swedish: "uppfattning",
                farsi: "Ø¯Ø±Ú©ØŒ Ø¨Ø±Ø¯Ø§Ø´Øª",
                example: "Min uppfattning Ã¤r att han hade rÃ¤tt.",
                example_farsi: "Ø¨Ø±Ø¯Ø§Ø´Øª Ù…Ù† Ø§ÛŒÙ† Ø§Ø³Øª Ú©Ù‡ Ø§Ùˆ Ø­Ù‚ Ø¯Ø§Ø´Øª.",
                related_words: ["Ã¥sikt - Ù†Ø¸Ø±", "instÃ¤llning - Ø¯ÛŒØ¯Ú¯Ø§Ù‡", "perspektiv - Ù…Ù†Ø¸Ø±"]
            },
            {
                id: 12,
                type: "vocabulary",
                level: 4,
                category: "Work",
                topic: "Ú©Ø§Ø± Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ",
                swedish: "fÃ¶rberedelse",
                farsi: "Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ",
                example: "FÃ¶rberedelserna infÃ¶r mÃ¶tet tog hela dagen.",
                example_farsi: "Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¬Ù„Ø³Ù‡ ØªÙ…Ø§Ù… Ø±ÙˆØ² Ø·ÙˆÙ„ Ú©Ø´ÛŒØ¯.",
                related_words: ["planering - Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ", "genomfÃ¶rande - Ø§Ø¬Ø±Ø§", "uppfÃ¶ljning - Ù¾ÛŒÚ¯ÛŒØ±ÛŒ"]
            },
            {
                id: 13,
                type: "conversation",
                level: 4,
                category: "Professional",
                topic: "Ù…Ø­ÛŒØ· Ú©Ø§Ø±",
                title: "Presentera en idÃ©",
                title_farsi: "Ø§Ø±Ø§Ø¦Ù‡ ÛŒÚ© Ø§ÛŒØ¯Ù‡",
                lines: [
                    { swedish: "- Jag skulle vilja lÃ¤gga fram ett fÃ¶rslag.", farsi: "- Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… ÛŒÚ© Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ù‡Ù…." },
                    { swedish: "- VarsÃ¥god, vi lyssnar.", farsi: "- Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯ØŒ Ú¯ÙˆØ´ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…." },
                    { swedish: "- Jag tycker vi borde investera mer i digital marknadsfÃ¶ring.", farsi: "- ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ´ØªØ± Ø±ÙˆÛŒ Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨ÛŒ Ø¯ÛŒØ¬ÛŒØªØ§Ù„ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú©Ù†ÛŒÙ…." },
                    { swedish: "- Intressant. Kan du utveckla det lite mer?", farsi: "- Ø¬Ø§Ù„Ø¨ Ø§Ø³Øª. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨ÛŒØ´ØªØ± ØªÙˆØ¶ÛŒØ­ Ø¯Ù‡ÛŒØ¯ØŸ" },
                    { swedish: "- SjÃ¤lvklart. Enligt senaste statistiken...", farsi: "- Ø§Ù„Ø¨ØªÙ‡. Ø·Ø¨Ù‚ Ø¢Ø®Ø±ÛŒÙ† Ø¢Ù…Ø§Ø±Ù‡Ø§..." }
                ]
            },
            {
                id: 14,
                type: "grammar_drill",
                level: 4,
                category: "Grammar",
                topic: "Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„",
                question: "NÃ¤r jag kom hem ___ barnen redan ___ .",
                farsi_question: "ÙˆÙ‚ØªÛŒ Ø¨Ù‡ Ø®Ø§Ù†Ù‡ Ø±Ø³ÛŒØ¯Ù…ØŒ Ø¨Ú†Ù‡â€ŒÙ‡Ø§ Ù‚Ø¨Ù„Ø§ ___ .",
                options: [
                    { text: "hade / somnat", correct: true },
                    { text: "har / somnat", correct: false },
                    { text: "skulle / somna", correct: false },
                    { text: "var / somnade", correct: false }
                ],
                explanation: "Ø²Ù…Ø§Ù† Ù…Ø§Ù‚Ø¨Ù„ Ú¯Ø°Ø´ØªÙ‡ (pluskvamperfekt): 'hade' + supinum Ø¨Ø±Ø§ÛŒ Ø§ØªÙØ§Ù‚ÛŒ Ú©Ù‡ Ù‚Ø¨Ù„ Ø§Ø² Ú¯Ø°Ø´ØªÙ‡ Ø±Ø® Ø¯Ø§Ø¯Ù‡"
            },
            {
                id: 15,
                type: "idiom",
                level: 4,
                category: "Expressions",
                topic: "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª",
                swedish: "Att ha rent mjÃ¶l i pÃ¥sen.",
                farsi: "Ø¢Ø±Ø¯ ØªÙ…ÛŒØ² Ø¯Ø± Ú©ÛŒØ³Ù‡ Ø¯Ø§Ø´ØªÙ†.",
                meaning: "ÙˆØ¬Ø¯Ø§Ù† Ù¾Ø§Ú© Ø¯Ø§Ø´ØªÙ† / Ú©Ø§Ø± Ø®Ù„Ø§ÙÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ø¯Ø§Ø¯Ù‡ Ø¨Ø§Ø´ÛŒ",
                example: "Du behÃ¶ver inte oroa dig om du har rent mjÃ¶l i pÃ¥sen.",
                example_farsi: "Ø§Ú¯Ø± ÙˆØ¬Ø¯Ø§Ù† Ù¾Ø§Ú©ÛŒ Ø¯Ø§Ø±ÛŒ Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ù†Ú¯Ø±Ø§Ù†ÛŒ Ù†ÛŒØ³Øª."
            },

            // === LEVEL 5: ADVANCED ===
            {
                id: 16,
                type: "complex_sentence",
                level: 5,
                category: "Grammar",
                topic: "Ø³Ø§Ø®ØªØ§Ø±Ù‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡",
                swedish: "Trots att vÃ¤dret var dÃ¥ligt bestÃ¤mde vi oss fÃ¶r att gÃ¥ ut och promenera.",
                farsi: "Ø¨Ø§ ÙˆØ¬ÙˆØ¯ Ø§ÛŒÙ†Ú©Ù‡ Ù‡ÙˆØ§ Ø¨Ø¯ Ø¨ÙˆØ¯ØŒ ØªØµÙ…ÛŒÙ… Ú¯Ø±ÙØªÛŒÙ… Ø¨ÛŒØ±ÙˆÙ† Ø¨Ø±ÙˆÛŒÙ… Ùˆ Ù‚Ø¯Ù… Ø¨Ø²Ù†ÛŒÙ….",
                grammar_note: "'Trots att' = Ø¨Ø§ ÙˆØ¬ÙˆØ¯ Ø§ÛŒÙ†Ú©Ù‡. Ø¬Ù…Ù„Ù‡ ÙØ±Ø¹ÛŒ ØªØ±ØªÛŒØ¨ Ø¹Ø§Ø¯ÛŒØŒ Ø¬Ù…Ù„Ù‡ Ø§ØµÙ„ÛŒ ÙˆØ§Ø±ÙˆÙ†Ú¯ÛŒ Ø¯Ø§Ø±Ø¯",
                difficulty: "Ù¾ÛŒØ´Ø±ÙØªÙ‡"
            },
            {
                id: 17,
                type: "complex_sentence",
                level: 5,
                category: "Grammar",
                topic: "Ù…Ø¬Ù‡ÙˆÙ„",
                swedish: "Projektet planerades noggrant men genomfÃ¶rdes tyvÃ¤rr aldrig.",
                farsi: "Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Ø¯Ù‚Øª Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø´Ø¯ Ø§Ù…Ø§ Ù…ØªØ§Ø³ÙØ§Ù†Ù‡ Ù‡Ø±Ú¯Ø² Ø§Ø¬Ø±Ø§ Ù†Ø´Ø¯.",
                grammar_note: "Ù…Ø¬Ù‡ÙˆÙ„ Ø¨Ø§ 's': ÙØ¹Ù„ + s. Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ø±Ø§ÛŒ Ø¬Ù…Ù„Ø§Øª Ø±Ø³Ù…ÛŒ Ùˆ Ù†ÙˆØ´ØªØ§Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯",
                difficulty: "Ù¾ÛŒØ´Ø±ÙØªÙ‡"
            },
            {
                id: 18,
                type: "vocabulary",
                level: 5,
                category: "Abstract",
                topic: "Ù…ÙØ§Ù‡ÛŒÙ… ÙÙ„Ø³ÙÛŒ",
                swedish: "fÃ¶rverkliga",
                farsi: "Ø¹Ù…Ù„ÛŒ Ú©Ø±Ø¯Ù†ØŒ ØªØ­Ù‚Ù‚ Ø¨Ø®Ø´ÛŒØ¯Ù†",
                example: "Hon lyckades fÃ¶rverkliga sina drÃ¶mmar.",
                example_farsi: "Ø§Ùˆ Ù…ÙˆÙÙ‚ Ø´Ø¯ Ø±ÙˆÛŒØ§Ù‡Ø§ÛŒØ´ Ø±Ø§ Ø¹Ù…Ù„ÛŒ Ú©Ù†Ø¯.",
                related_words: ["uppnÃ¥ - Ø¯Ø³Øª ÛŒØ§ÙØªÙ†", "Ã¥stadkomma - Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù†", "realisera - ØªØ­Ù‚Ù‚ Ø¨Ø®Ø´ÛŒØ¯Ù†"]
            },
            {
                id: 19,
                type: "conversation",
                level: 5,
                category: "Debate",
                topic: "Ø¨Ø­Ø« Ùˆ Ú¯ÙØªÚ¯Ùˆ",
                title: "Diskutera ett Ã¤mne",
                title_farsi: "Ø¨Ø­Ø« Ø¯Ø±Ø¨Ø§Ø±Ù‡ ÛŒÚ© Ù…ÙˆØ¶ÙˆØ¹",
                lines: [
                    { swedish: "- Vad tycker du om fÃ¶rslaget?", farsi: "- Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ú†Ù‡ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ" },
                    { swedish: "- Ã… ena sidan ser jag fÃ¶rdelarna, men Ã¥ andra sidan...", farsi: "- Ø§Ø² ÛŒÚ© Ø·Ø±Ù Ù…Ø²Ø§ÛŒØ§ Ø±Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù…ØŒ Ø§Ù…Ø§ Ø§Ø² Ø·Ø±Ù Ø¯ÛŒÚ¯Ø±..." },
                    { swedish: "- Jag fÃ¶rstÃ¥r din synpunkt, men jag anser att...", farsi: "- Ø¯ÛŒØ¯Ú¯Ø§Ù‡ Ø´Ù…Ø§ Ø±Ø§ Ø¯Ø±Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù…ØŒ Ø§Ù…Ø§ Ù…Ø¹ØªÙ‚Ø¯Ù… Ú©Ù‡..." },
                    { swedish: "- Det Ã¤r en god poÃ¤ng. DÃ¤remot mÃ¥ste vi ocksÃ¥ ta hÃ¤nsyn till...", farsi: "- Ù†Ú©ØªÙ‡ Ø®ÙˆØ¨ÛŒ Ø§Ø³Øª. Ø¨Ø§ Ø§ÛŒÙ† Ø­Ø§Ù„ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡... Ù‡Ù… ØªÙˆØ¬Ù‡ Ú©Ù†ÛŒÙ…." },
                    { swedish: "- Absolut. LÃ¥t oss hitta en kompromiss.", farsi: "- Ú©Ø§Ù…Ù„Ø§ Ø¯Ø±Ø³Øª. Ø¨ÛŒØ§ÛŒÛŒØ¯ ÛŒÚ© Ø±Ø§Ù‡ Ø­Ù„ Ù…ÛŒØ§Ù†Ù‡ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒÙ…." }
                ]
            },
            {
                id: 20,
                type: "idiom",
                level: 5,
                category: "Expressions",
                topic: "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡",
                swedish: "Att sticka ut hakan.",
                farsi: "Ú†Ø§Ù†Ù‡ Ø±Ø§ Ø¨ÛŒØ±ÙˆÙ† Ø¯Ø§Ø¯Ù†.",
                meaning: "Ø¬Ø±Ø§Øª Ú©Ø±Ø¯Ù†ØŒ Ø´Ø¬Ø§Ø¹ Ø¨ÙˆØ¯Ù†",
                example: "Hon vÃ¥gade sticka ut hakan och sÃ¤ga vad hon verkligen tyckte.",
                example_farsi: "Ø§Ùˆ Ø¬Ø±Ø§Øª Ú©Ø±Ø¯ Ùˆ Ú¯ÙØª ÙˆØ§Ù‚Ø¹Ø§ Ú†Ù‡ ÙÚ©Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯."
            },

            // Additional content - expanding to ~50 items for demo
            {
                id: 21,
                type: "complex_sentence",
                level: 3,
                category: "Grammar",
                topic: "Ø­Ø±ÙˆÙ Ø±Ø¨Ø·",
                swedish: "Ã„ven om det regnar ska vi Ã¥ka till stranden.",
                farsi: "Ø­ØªÛŒ Ø§Ú¯Ø± Ø¨Ø§Ø±Ø§Ù† Ø¨Ø¨Ø§Ø±Ø¯ØŒ Ø¨Ù‡ Ø³Ø§Ø­Ù„ Ø®ÙˆØ§Ù‡ÛŒÙ… Ø±ÙØª.",
                grammar_note: "'Ã„ven om' = Ø­ØªÛŒ Ø§Ú¯Ø±. Ø¨Ø±Ø§ÛŒ Ø¨ÛŒØ§Ù† Ø´Ø±Ø· Ú©Ù‡ Ø¨Ø± Ù†ØªÛŒØ¬Ù‡ ØªØ§Ø«ÛŒØ± Ù†Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±Ø¯",
                difficulty: "Ù…ØªÙˆØ³Ø·"
            },
            {
                id: 22,
                type: "vocabulary",
                level: 3,
                category: "Daily Life",
                topic: "Ø²Ù†Ø¯Ú¯ÛŒ Ø±ÙˆØ²Ù…Ø±Ù‡",
                swedish: "handla",
                farsi: "Ø®Ø±ÛŒØ¯ Ú©Ø±Ø¯Ù†",
                example: "Jag mÃ¥ste handla mat pÃ¥ vÃ¤gen hem.",
                example_farsi: "Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ø±Ø§Ù‡ Ø®Ø§Ù†Ù‡ Ø®Ø±ÛŒØ¯ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ú©Ù†Ù….",
                related_words: ["kÃ¶pa - Ø®Ø±ÛŒØ¯Ù†", "betala - Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ø±Ø¯Ù†", "kvitto - Ø±Ø³ÛŒØ¯"]
            },
            {
                id: 23,
                type: "complex_sentence",
                level: 3,
                category: "Grammar",
                topic: "Ø²Ù…Ø§Ù† Ø¢ÛŒÙ†Ø¯Ù‡",
                swedish: "NÃ¤sta Ã¥r kommer jag att flytta till en ny stad.",
                farsi: "Ø³Ø§Ù„ Ø¢ÛŒÙ†Ø¯Ù‡ Ø¨Ù‡ Ø´Ù‡Ø± Ø¬Ø¯ÛŒØ¯ÛŒ Ù†Ù‚Ù„ Ù…Ú©Ø§Ù† Ø®ÙˆØ§Ù‡Ù… Ú©Ø±Ø¯.",
                grammar_note: "Ø¢ÛŒÙ†Ø¯Ù‡ Ø¨Ø§ 'kommer att' + ÙØ¹Ù„ Ù…ØµØ¯Ø±ÛŒ. Ø±Ø³Ù…ÛŒâ€ŒØªØ± Ø§Ø² 'ska'",
                difficulty: "Ù…ØªÙˆØ³Ø·"
            },
            {
                id: 24,
                type: "vocabulary",
                level: 4,
                category: "Emotions",
                topic: "Ø§Ø­Ø³Ø§Ø³Ø§Øª",
                swedish: "besviken",
                farsi: "Ù†Ø§Ø§Ù…ÛŒØ¯",
                example: "Jag blev vÃ¤ldigt besviken nÃ¤r jag hÃ¶rde nyheten.",
                example_farsi: "ÙˆÙ‚ØªÛŒ Ø®Ø¨Ø± Ø±Ø§ Ø´Ù†ÛŒØ¯Ù… Ø®ÛŒÙ„ÛŒ Ù†Ø§Ø§Ù…ÛŒØ¯ Ø´Ø¯Ù….",
                related_words: ["ledsen - ØºÙ…Ú¯ÛŒÙ†", "arg - Ø¹ØµØ¨Ø§Ù†ÛŒ", "glad - Ø®ÙˆØ´Ø­Ø§Ù„"]
            },
            {
                id: 25,
                type: "conversation",
                level: 3,
                category: "Healthcare",
                topic: "Ø¨Ù‡Ø¯Ø§Ø´Øª Ùˆ Ø¯Ø±Ù…Ø§Ù†",
                title: "PÃ¥ vÃ¥rdcentralen",
                title_farsi: "Ø¯Ø± Ù…Ø±Ú©Ø² Ø¨Ù‡Ø¯Ø§Ø´Øª",
                lines: [
                    { swedish: "- Jag har ont i halsen sedan nÃ¥gra dagar.", farsi: "- Ú†Ù†Ø¯ Ø±ÙˆØ²Ù‡ Ú¯Ù„ÙˆÛŒÙ… Ø¯Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯." },
                    { swedish: "- Har du feber ocksÃ¥?", farsi: "- ØªØ¨ Ù‡Ù… Ø¯Ø§Ø±ÛŒØ¯ØŸ" },
                    { swedish: "- Ja, lite grann. Omkring 38 grader.", farsi: "- Ø¨Ù„Ù‡ØŒ Ú©Ù…ÛŒ. Ø­Ø¯ÙˆØ¯ 38 Ø¯Ø±Ø¬Ù‡." },
                    { swedish: "- Jag ska undersÃ¶ka dig. SÃ¤g 'aaa'.", farsi: "- Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ù…Ø¹Ø§ÛŒÙ†Ù‡â€ŒØªØ§Ù† Ú©Ù†Ù…. 'Ø¢' Ø¨Ú¯ÙˆÛŒÛŒØ¯." },
                    { swedish: "- Aaa...", farsi: "- Ø¢Ø¢Ø¢..." }
                ]
            },
            {
                id: 26,
                type: "grammar_drill",
                level: 3,
                category: "Grammar",
                topic: "Ø§ÙØ¹Ø§Ù„ Ù…Ø¯Ø§Ù„",
                question: "Du ___ inte rÃ¶ka hÃ¤r inne.",
                farsi_question: "Ø´Ù…Ø§ ___ Ø§ÛŒÙ†Ø¬Ø§ Ø³ÛŒÚ¯Ø§Ø± Ø¨Ú©Ø´ÛŒØ¯.",
                options: [
                    { text: "fÃ¥r", correct: true },
                    { text: "kan", correct: false },
                    { text: "ska", correct: false },
                    { text: "vill", correct: false }
                ],
                explanation: "'fÃ¥r inte' = Ø§Ø¬Ø§Ø²Ù‡ Ù†Ø¯Ø§Ø´ØªÙ† / Ù…Ù…Ù†ÙˆØ¹ Ø¨ÙˆØ¯Ù†"
            },
            {
                id: 27,
                type: "complex_sentence",
                level: 4,
                category: "Grammar",
                topic: "Ø¬Ù…Ù„Ø§Øª Ù…Ù‚Ø§ÛŒØ³Ù‡â€ŒØ§ÛŒ",
                swedish: "Ju mer jag lÃ¤r mig svenska, desto lÃ¤ttare blir det.",
                farsi: "Ù‡Ø± Ú†Ù‡ Ø¨ÛŒØ´ØªØ± Ø³ÙˆØ¦Ø¯ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±Ù…ØŒ Ø¢Ø³Ø§Ù†â€ŒØªØ± Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
                grammar_note: "Ø³Ø§Ø®ØªØ§Ø± 'ju... desto': Ù‡Ø± Ú†Ù‡... Ø¨Ù‡ Ù‡Ù…Ø§Ù† Ø§Ù†Ø¯Ø§Ø²Ù‡... Ø¨Ø±Ø§ÛŒ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù‡Ù…Ø²Ù…Ø§Ù†",
                difficulty: "Ù¾ÛŒØ´Ø±ÙØªÙ‡"
            },
            {
                id: 28,
                type: "vocabulary",
                level: 4,
                category: "Society",
                topic: "Ø¬Ø§Ù…Ø¹Ù‡",
                swedish: "samhÃ¤lle",
                farsi: "Ø¬Ø§Ù…Ø¹Ù‡",
                example: "Vi lever i ett mÃ¥ngkulturellt samhÃ¤lle.",
                example_farsi: "Ù…Ø§ Ø¯Ø± ÛŒÚ© Ø¬Ø§Ù…Ø¹Ù‡ Ú†Ù†Ø¯ÙØ±Ù‡Ù†Ú¯ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….",
                related_words: ["kultur - ÙØ±Ù‡Ù†Ú¯", "tradition - Ø³Ù†Øª", "vÃ¤rderingar - Ø§Ø±Ø²Ø´â€ŒÙ‡Ø§"]
            },
            {
                id: 29,
                type: "idiom",
                level: 3,
                category: "Expressions",
                topic: "Ø§ØµØ·Ù„Ø§Ø­Ø§Øª",
                swedish: "BÃ¤ttre sent Ã¤n aldrig.",
                farsi: "Ø¯ÛŒØ± Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ØªØ± Ø§Ø² Ù‡Ø±Ú¯Ø² Ù†Ø±Ø³ÛŒØ¯Ù† Ø§Ø³Øª.",
                meaning: "Ø¯ÛŒØ± Ø¨Ù‡ØªØ± Ø§Ø² Ù‡ÛŒÚ† Ø§Ø³Øª",
                example: "Du kom sent, men bÃ¤ttre sent Ã¤n aldrig!",
                example_farsi: "Ø¯ÛŒØ± Ø¢Ù…Ø¯ÛŒØŒ Ø§Ù…Ø§ Ø¯ÛŒØ± Ø¨Ù‡ØªØ± Ø§Ø² Ù‡ÛŒÚ† Ø§Ø³Øª!"
            },
            {
                id: 30,
                type: "conversation",
                level: 4,
                category: "Social",
                topic: "Ù…Ú©Ø§Ù„Ù…Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ",
                title: "Bjuda pÃ¥ middag",
                title_farsi: "Ø¯Ø¹ÙˆØª Ø¨Ù‡ Ø´Ø§Ù…",
                lines: [
                    { swedish: "- Vad roligt att du kunde komma!", farsi: "- Ú†Ù‡ Ø®ÙˆØ¨ Ú©Ù‡ ØªÙˆØ§Ù†Ø³ØªÛŒØ¯ Ø¨ÛŒØ§ÛŒÛŒØ¯!" },
                    { swedish: "- Tack fÃ¶r inbjudan! Det luktar underbart.", farsi: "- Ù…ØªØ´Ú©Ø±Ù… Ø¨Ø±Ø§ÛŒ Ø¯Ø¹ÙˆØª! Ø¨ÙˆÛŒ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯." },
                    { swedish: "- Jag har lagat en traditionell svensk rÃ¤tt.", farsi: "- ÛŒÚ© ØºØ°Ø§ÛŒ Ø³Ù†ØªÛŒ Ø³ÙˆØ¦Ø¯ÛŒ Ø¯Ø±Ø³Øª Ú©Ø±Ø¯Ù‡â€ŒØ§Ù…." },
                    { swedish: "- Jag ser fram emot att smaka!", farsi: "- Ù…Ø´ØªØ§Ù‚ Ú†Ø´ÛŒØ¯Ù† Ø¢Ù† Ù‡Ø³ØªÙ…!" },
                    { swedish: "- VarsÃ¥god och sitt ner.", farsi: "- Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯ØŒ Ù„Ø·ÙØ§ Ø¨Ù†Ø´ÛŒÙ†ÛŒØ¯." }
                ]
            }
        ];

        function SwedishFarsiApp() {
            const [cards, setCards] = useState([]);
            const [currentCard, setCurrentCard] = useState(null);
            const [showAnswer, setShowAnswer] = useState(false);
            const [stats, setStats] = useState({
                totalReviewed: 0,
                todayReviewed: 0,
                sessionReviewed: 0,
                lastStudyDate: new Date().toISOString().split('T')[0]
            });
            const [view, setView] = useState('welcome');
            const [selectedTopic, setSelectedTopic] = useState('all');
            const [selectedLevel, setSelectedLevel] = useState('all');

            // Initialize
            useEffect(() => {
                const savedCards = localStorage.getItem('swedishFarsiCards');
                const savedStats = localStorage.getItem('swedishFarsiStats');

                if (savedCards) {
                    const parsed = JSON.parse(savedCards);
                    parsed.forEach(card => {
                        card.nextReview = new Date(card.nextReview);
                    });
                    setCards(parsed);
                } else {
                    const initialized = contentDatabase.map(item => ({
                        ...item,
                        nextReview: new Date(),
                        interval: 0,
                        easeFactor: 2.5,
                        repetitions: 0,
                        isNew: true
                    }));
                    setCards(initialized);
                    localStorage.setItem('swedishFarsiCards', JSON.stringify(initialized));
                }

                if (savedStats) {
                    const parsedStats = JSON.parse(savedStats);
                    const today = new Date().toISOString().split('T')[0];
                    
                    if (parsedStats.lastStudyDate !== today) {
                        parsedStats.todayReviewed = 0;
                        parsedStats.sessionReviewed = 0;
                        parsedStats.lastStudyDate = today;
                    }
                    setStats(parsedStats);
                }
            }, []);

            useEffect(() => {
                if (cards.length > 0) {
                    localStorage.setItem('swedishFarsiCards', JSON.stringify(cards));
                }
            }, [cards]);

            useEffect(() => {
                localStorage.setItem('swedishFarsiStats', JSON.stringify(stats));
            }, [stats]);

            const getDueCards = () => {
                const now = new Date();
                let filtered = cards.filter(card => card.nextReview <= now && !card.isNew);
                
                if (selectedTopic !== 'all') {
                    filtered = filtered.filter(card => card.topic === selectedTopic);
                }
                if (selectedLevel !== 'all') {
                    filtered = filtered.filter(card => card.level === parseInt(selectedLevel));
                }
                
                return filtered;
            };

            const getNewCards = () => {
                let filtered = cards.filter(card => card.isNew);
                
                if (selectedTopic !== 'all') {
                    filtered = filtered.filter(card => card.topic === selectedTopic);
                }
                if (selectedLevel !== 'all') {
                    filtered = filtered.filter(card => card.level === parseInt(selectedLevel));
                }
                
                return filtered.slice(0, 5);
            };

            const calculateNextReview = (card, quality) => {
                let interval = card.interval;
                let easeFactor = card.easeFactor;
                let repetitions = card.repetitions;

                if (quality >= 3) {
                    if (repetitions === 0) {
                        interval = 1;
                    } else if (repetitions === 1) {
                        interval = 6;
                    } else {
                        interval = Math.round(interval * easeFactor);
                    }
                    repetitions += 1;
                } else {
                    repetitions = 0;
                    interval = 1;
                }

                easeFactor = easeFactor + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02));
                easeFactor = Math.max(1.3, easeFactor);

                const nextReview = new Date();
                nextReview.setDate(nextReview.getDate() + interval);

                return { interval, easeFactor, repetitions, nextReview, isNew: false };
            };

            const speakSwedish = (text, slow = false) => {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'sv-SE';
                    utterance.rate = slow ? 0.5 : 0.9;
                    window.speechSynthesis.cancel();
                    window.speechSynthesis.speak(utterance);
                }
            };

            const startReview = () => {
                const dueCards = getDueCards();
                const newCards = getNewCards();
                const remaining = DAILY_GOAL - stats.sessionReviewed;
                const availableCards = [...dueCards, ...newCards].slice(0, remaining);

                if (availableCards.length > 0) {
                    setCurrentCard(availableCards[0]);
                    setShowAnswer(false);
                    setView('review');
                }
            };

            const handleRating = (difficulty) => {
                if (!currentCard) return;

                const qualityMap = { 'hard': 2, 'medium': 3, 'easy': 5 };
                const quality = qualityMap[difficulty];
                const updates = calculateNextReview(currentCard, quality);

                setCards(prevCards =>
                    prevCards.map(card =>
                        card.id === currentCard.id ? { ...card, ...updates } : card
                    )
                );

                setStats(prev => ({
                    ...prev,
                    totalReviewed: prev.totalReviewed + 1,
                    todayReviewed: prev.todayReviewed + 1,
                    sessionReviewed: prev.sessionReviewed + 1
                }));

                const dueCards = getDueCards();
                const newCards = getNewCards();
                const remaining = DAILY_GOAL - stats.sessionReviewed - 1;
                const availableCards = [...dueCards, ...newCards]
                    .filter(c => c.id !== currentCard.id)
                    .slice(0, remaining);

                if (availableCards.length > 0 && stats.sessionReviewed < DAILY_GOAL) {
                    setCurrentCard(availableCards[0]);
                    setShowAnswer(false);
                } else {
                    setCurrentCard(null);
                    setView('completed');
                }
            };

            const renderCard = () => {
                if (!currentCard) return null;

                const { type } = currentCard;

                if (type === 'complex_sentence') {
                    return (
                        <div className="space-y-6">
                            <div className="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-8 text-white">
                                <div className="text-sm opacity-80 mb-2">Ø¬Ù…Ù„Ù‡ Ø³ÙˆØ¦Ø¯ÛŒ:</div>
                                <div className="text-2xl font-bold ltr-text mb-6">{currentCard.swedish}</div>
                                
                                {showAnswer && (
                                    <>
                                        <div className="border-t border-white/30 my-4"></div>
                                        <div className="text-sm opacity-80 mb-2">ØªØ±Ø¬Ù…Ù‡ ÙØ§Ø±Ø³ÛŒ:</div>
                                        <div className="text-xl mb-4">{currentCard.farsi}</div>
                                        
                                        <div className="bg-white/10 rounded-lg p-4 mt-4">
                                            <div className="text-sm font-semibold mb-2">ğŸ“š Ù†Ú©ØªÙ‡ Ú¯Ø±Ø§Ù…Ø±ÛŒ:</div>
                                            <div className="text-sm">{currentCard.grammar_note}</div>
                                        </div>
                                        
                                        <div className="flex gap-3 justify-center mt-6">
                                            <button
                                                onClick={(e) => {
                                                    e.stopPropagation();
                                                    speakSwedish(currentCard.swedish, false);
                                                }}
                                                className="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition"
                                            >
                                                ğŸ”Š Ø³Ø±Ø¹Øª Ø¹Ø§Ø¯ÛŒ
                                            </button>
                                            <button
                                                onClick={(e) => {
                                                    e.stopPropagation();
                                                    speakSwedish(currentCard.swedish, true);
                                                }}
                                                className="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition"
                                            >
                                                ğŸ”Š Ø¢Ù‡Ø³ØªÙ‡
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>
                            
                            {!showAnswer && (
                                <button
                                    onClick={() => setShowAnswer(true)}
                                    className="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition"
                                >
                                    Ù†Ù…Ø§ÛŒØ´ ØªØ±Ø¬Ù…Ù‡ Ùˆ ØªÙˆØ¶ÛŒØ­Ø§Øª
                                </button>
                            )}
                        </div>
                    );
                }

                if (type === 'vocabulary') {
                    return (
                        <div className="space-y-6">
                            <div className="bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-8 text-white">
                                <div className="text-sm opacity-80 mb-2">ÙˆØ§Ú˜Ù‡ Ø³ÙˆØ¦Ø¯ÛŒ:</div>
                                <div className="text-3xl font-bold ltr-text mb-6">{currentCard.swedish}</div>
                                
                                {showAnswer && (
                                    <>
                                        <div className="border-t border-white/30 my-4"></div>
                                        <div className="text-sm opacity-80 mb-2">Ù…Ø¹Ù†ÛŒ ÙØ§Ø±Ø³ÛŒ:</div>
                                        <div className="text-2xl mb-6">{currentCard.farsi}</div>
                                        
                                        <div className="bg-white/10 rounded-lg p-4 mb-4">
                                            <div className="text-sm font-semibold mb-2">Ù…Ø«Ø§Ù„:</div>
                                            <div className="ltr-text mb-2">{currentCard.example}</div>
                                            <div className="text-sm opacity-90">{currentCard.example_farsi}</div>
                                        </div>
                                        
                                        <div className="bg-white/10 rounded-lg p-4">
                                            <div className="text-sm font-semibold mb-2">Ú©Ù„Ù…Ø§Øª Ù…Ø±ØªØ¨Ø·:</div>
                                            {currentCard.related_words.map((word, idx) => (
                                                <div key={idx} className="text-sm opacity-90">{word}</div>
                                            ))}
                                        </div>
                                    </>
                                )}
                            </div>
                            
                            {!showAnswer && (
                                <button
                                    onClick={() => setShowAnswer(true)}
                                    className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition"
                                >
                                    Ù†Ù…Ø§ÛŒØ´ Ù…Ø¹Ù†ÛŒ Ùˆ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§
                                </button>
                            )}
                        </div>
                    );
                }

                if (type === 'conversation') {
                    return (
                        <div className="space-y-6">
                            <div className="bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl p-8 text-white">
                                <div className="text-xl font-bold mb-2">{currentCard.title_farsi}</div>
                                <div className="text-sm opacity-80 ltr-text mb-6">{currentCard.title}</div>
                                
                                <div className="space-y-3">
                                    {currentCard.lines.map((line, idx) => (
                                        <div key={idx} className="bg-white/10 rounded-lg p-3">
                                            <div className="ltr-text font-semibold mb-1">{line.swedish}</div>
                                            {showAnswer && <div className="text-sm opacity-90">{line.farsi}</div>}
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            {!showAnswer && (
                                <button
                                    onClick={() => setShowAnswer(true)}
                                    className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition"
                                >
                                    Ù†Ù…Ø§ÛŒØ´ ØªØ±Ø¬Ù…Ù‡â€ŒÙ‡Ø§
                                </button>
                            )}
                        </div>
                    );
                }

                if (type === 'grammar_drill') {
                    return (
                        <div className="space-y-6">
                            <div className="bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-8 text-white">
                                <div className="text-lg font-bold mb-4">ØªÙ…Ø±ÛŒÙ† Ú¯Ø±Ø§Ù…Ø±</div>
                                <div className="ltr-text text-xl mb-4">{currentCard.question}</div>
                                <div className="text-sm opacity-90 mb-6">{currentCard.farsi_question}</div>
                                
                                {!showAnswer ? (
                                    <div className="space-y-2">
                                        {currentCard.options.map((option, idx) => (
                                            <button
                                                key={idx}
                                                onClick={() => setShowAnswer(true)}
                                                className="w-full bg-white/20 hover:bg-white/30 py-3 rounded-lg transition text-right px-4"
                                            >
                                                {option.text}
                                            </button>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {currentCard.options.map((option, idx) => (
                                            <div
                                                key={idx}
                                                className={`py-3 px-4 rounded-lg ${
                                                    option.correct ? 'bg-green-500' : 'bg-white/20'
                                                }`}
                                            >
                                                {option.text} {option.correct && 'âœ“'}
                                            </div>
                                        ))}
                                        <div className="bg-white/10 rounded-lg p-4 mt-4">
                                            <div className="text-sm font-semibold mb-2">ØªÙˆØ¶ÛŒØ­:</div>
                                            <div className="text-sm">{currentCard.explanation}</div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    );
                }

                if (type === 'idiom') {
                    return (
                        <div className="space-y-6">
                            <div className="bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl p-8 text-white">
                                <div className="text-sm opacity-80 mb-2">Ø§ØµØ·Ù„Ø§Ø­ Ø³ÙˆØ¦Ø¯ÛŒ:</div>
                                <div className="text-2xl font-bold ltr-text mb-6">{currentCard.swedish}</div>
                                
                                {showAnswer && (
                                    <>
                                        <div className="border-t border-white/30 my-4"></div>
                                        <div className="text-sm opacity-80 mb-2">ØªØ±Ø¬Ù…Ù‡ ØªØ­Øªâ€ŒØ§Ù„Ù„ÙØ¸ÛŒ:</div>
                                        <div className="text-xl mb-4">{currentCard.farsi}</div>
                                        
                                        <div className="bg-white/10 rounded-lg p-4 mb-4">
                                            <div className="text-sm font-semibold mb-2">Ù…Ø¹Ù†ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ:</div>
                                            <div className="text-lg">{currentCard.meaning}</div>
                                        </div>
                                        
                                        <div className="bg-white/10 rounded-lg p-4">
                                            <div className="text-sm font-semibold mb-2">Ù…Ø«Ø§Ù„:</div>
                                            <div className="ltr-text mb-2">{currentCard.example}</div>
                                            <div className="text-sm opacity-90">{currentCard.example_farsi}</div>
                                        </div>
                                    </>
                                )}
                            </div>
                            
                            {!showAnswer && (
                                <button
                                    onClick={() => setShowAnswer(true)}
                                    className="w-full bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700 transition"
                                >
                                    Ù†Ù…Ø§ÛŒØ´ Ù…Ø¹Ù†ÛŒ Ùˆ Ù…Ø«Ø§Ù„
                                </button>
                            )}
                        </div>
                    );
                }
            };

            const dueCount = getDueCards().length;
            const newCount = getNewCards().length;

            if (view === 'welcome' || view === 'completed') {
                const isCompleted = view === 'completed';
                const totalDue = dueCount + newCount;

                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                                <div className="flex items-center justify-between mb-4">
                                    <div>
                                        <h1 className="text-3xl font-bold text-gray-800">ğŸ‡¸ğŸ‡ª ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø³ÙˆØ¦Ø¯ÛŒ</h1>
                                        <p className="text-gray-600 mt-1">Ø³Ø·Ø­ Ù…ØªÙˆØ³Ø· Ø¨Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡</p>
                                    </div>
                                    <button
                                        onClick={() => setView('stats')}
                                        className="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition"
                                    >
                                        ğŸ“Š Ø¢Ù…Ø§Ø± Ù¾ÛŒØ´Ø±ÙØª
                                    </button>
                                </div>

                                <div className="grid grid-cols-3 gap-4 mb-4">
                                    <div className="bg-blue-50 rounded-lg p-4 text-center">
                                        <div className="text-2xl font-bold text-blue-600">{dueCount}</div>
                                        <div className="text-sm text-gray-600">Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡</div>
                                    </div>
                                    <div className="bg-green-50 rounded-lg p-4 text-center">
                                        <div className="text-2xl font-bold text-green-600">{newCount}</div>
                                        <div className="text-sm text-gray-600">Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯</div>
                                    </div>
                                    <div className="bg-purple-50 rounded-lg p-4 text-center">
                                        <div className="text-2xl font-bold text-purple-600">
                                            {stats.sessionReviewed}/{DAILY_GOAL}
                                        </div>
                                        <div className="text-sm text-gray-600">Ø§Ù…Ø±ÙˆØ²</div>
                                    </div>
                                </div>

                                <div className="bg-gray-50 rounded-lg p-4">
                                    <div className="flex justify-between text-sm text-gray-600 mb-2">
                                        <span>Ù¾ÛŒØ´Ø±ÙØª Ø±ÙˆØ²Ø§Ù†Ù‡</span>
                                        <span>{Math.round((stats.sessionReviewed / DAILY_GOAL) * 100)}%</span>
                                    </div>
                                    <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                                        <div
                                            className="h-full bg-gradient-to-r from-indigo-400 to-purple-600 transition-all"
                                            style={{ width: `${Math.min((stats.sessionReviewed / DAILY_GOAL) * 100, 100)}%` }}
                                        />
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-2xl shadow-xl p-12 text-center">
                                <div className="text-6xl mb-4">{isCompleted ? 'ğŸ‰' : 'ğŸ‡¸ğŸ‡ª'}</div>
                                <h2 className="text-3xl font-bold text-gray-800 mb-4">
                                    {isCompleted ? 'ØªÙ…Ø±ÛŒÙ† Ø§Ù…Ø±ÙˆØ² ØªÙ…Ø§Ù… Ø´Ø¯!' : 'Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!'}
                                </h2>
                                <p className="text-gray-600 mb-6">
                                    {isCompleted
                                        ? `Ø§Ù…Ø±ÙˆØ² ${stats.sessionReviewed} Ú©Ø§Ø±Øª Ø±Ø§ Ù…Ø±ÙˆØ± Ú©Ø±Ø¯ÛŒØ¯. Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯!`
                                        : totalDue > 0
                                            ? `${totalDue} Ú©Ø§Ø±Øª Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ± Ø§Ø³Øª.`
                                            : 'ØªÙ…Ø§Ù… Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ² Ø±Ø§ Ù…Ø±ÙˆØ± Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯!'}
                                </p>
                                {totalDue > 0 && (
                                    <button
                                        onClick={startReview}
                                        className="px-8 py-4 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition text-lg font-bold"
                                    >
                                        â–¶ Ø´Ø±ÙˆØ¹ ØªÙ…Ø±ÛŒÙ†
                                    </button>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (view === 'stats') {
                const mastered = cards.filter(c => !c.isNew && c.repetitions >= 3).length;
                const started = cards.filter(c => !c.isNew).length;

                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                        <div className="max-w-2xl mx-auto">
                            <div className="bg-white rounded-2xl shadow-xl p-8">
                                <div className="flex items-center justify-between mb-8">
                                    <h1 className="text-3xl font-bold text-gray-800">ğŸ“ˆ Ù¾ÛŒØ´Ø±ÙØª Ø´Ù…Ø§</h1>
                                    <button
                                        onClick={() => setView('welcome')}
                                        className="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition"
                                    >
                                        â† Ø¨Ø§Ø²Ú¯Ø´Øª
                                    </button>
                                </div>

                                <div className="grid grid-cols-3 gap-4 mb-8">
                                    <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white text-center">
                                        <div className="text-4xl font-bold mb-2">{stats.totalReviewed}</div>
                                        <div className="text-blue-100">Ú©Ù„ Ù…Ø±ÙˆØ± Ø´Ø¯Ù‡</div>
                                    </div>

                                    <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white text-center">
                                        <div className="text-4xl font-bold mb-2">{stats.todayReviewed}</div>
                                        <div className="text-green-100">Ø§Ù…Ø±ÙˆØ²</div>
                                    </div>

                                    <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white text-center">
                                        <div className="text-4xl font-bold mb-2">{dueCount + newCount}</div>
                                        <div className="text-purple-100">Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡</div>
                                    </div>
                                </div>

                                <div className="bg-gray-50 rounded-xl p-6">
                                    <h3 className="text-xl font-semibold mb-4 text-gray-800">Ø³Ø·Ø­ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <div className="flex justify-between text-sm text-gray-600 mb-1">
                                                <span>Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ØªØ³Ù„Ø· ÛŒØ§ÙØªÙ‡</span>
                                                <span>{mastered} / {cards.length}</span>
                                            </div>
                                            <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                                                <div
                                                    className="h-full bg-gradient-to-r from-green-400 to-green-600"
                                                    style={{ width: `${(mastered / cards.length) * 100}%` }}
                                                />
                                            </div>
                                        </div>

                                        <div>
                                            <div className="flex justify-between text-sm text-gray-600 mb-1">
                                                <span>Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø´Ø¯Ù‡</span>
                                                <span>{started} / {cards.length}</span>
                                            </div>
                                            <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                                                <div
                                                    className="h-full bg-gradient-to-r from-blue-400 to-blue-600"
                                                    style={{ width: `${(started / cards.length) * 100}%` }}
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            if (view === 'review' && currentCard) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                                <div className="flex items-center justify-between mb-4">
                                    <div>
                                        <h1 className="text-2xl font-bold text-gray-800">ğŸ‡¸ğŸ‡ª ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø³ÙˆØ¦Ø¯ÛŒ</h1>
                                        <div className="text-sm text-gray-600 mt-1">
                                            Ø³Ø·Ø­ {currentCard.level} â€¢ {currentCard.topic}
                                        </div>
                                    </div>
                                    <div className="text-indigo-600 font-semibold">
                                        {stats.sessionReviewed}/{DAILY_GOAL}
                                    </div>
                                </div>
                                <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                                    <div
                                        className="h-full bg-indigo-600 transition-all"
                                        style={{ width: `${(stats.sessionReviewed / DAILY_GOAL) * 100}%` }}
                                    />
                                </div>
                            </div>

                            <div className="bg-white rounded-2xl shadow-xl p-8">
                                {renderCard()}

                                {showAnswer && (
                                    <div className="mt-8">
                                        <div className="text-center text-gray-600 mb-4 font-medium">
                                            Ú†Ù‚Ø¯Ø± Ø§ÛŒÙ† Ù…ÙˆØ±Ø¯ Ø±Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø³ØªÛŒØ¯ØŸ
                                        </div>
                                        <div className="grid grid-cols-3 gap-4">
                                            <button
                                                onClick={() => handleRating('hard')}
                                                className="bg-red-50 hover:bg-red-100 text-red-700 py-4 rounded-xl font-semibold transition"
                                            >
                                                Ø³Ø®Øª
                                                <div className="text-xs text-red-600 mt-1">Ù…Ø±ÙˆØ± Ø²ÙˆØ¯</div>
                                            </button>
                                            <button
                                                onClick={() => handleRating('medium')}
                                                className="bg-yellow-50 hover:bg-yellow-100 text-yellow-700 py-4 rounded-xl font-semibold transition"
                                            >
                                                Ù…ØªÙˆØ³Ø·
                                                <div className="text-xs text-yellow-600 mt-1">Ù…Ø±ÙˆØ± Ø¯Ø± Ú†Ù†Ø¯ Ø±ÙˆØ²</div>
                                            </button>
                                            <button
                                                onClick={() => handleRating('easy')}
                                                className="bg-green-50 hover:bg-green-100 text-green-700 py-4 rounded-xl font-semibold transition"
                                            >
                                                Ø¢Ø³Ø§Ù†
                                                <div className="text-xs text-green-600 mt-1">Ù…Ø±ÙˆØ± Ø¨Ø¹Ø¯</div>
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        }

        ReactDOM.render(<SwedishFarsiApp />, document.getElementById('root'));
    </script>
</body>
</html>